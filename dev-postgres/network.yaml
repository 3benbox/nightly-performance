---
apiVersion: "keramik.3box.io/v1alpha1"
kind: Network
metadata:
  name: nightly-dev-hermetic-test
spec:
  replicas: 2
  ttlSeconds: 14400
  ceramic:
    - resourceLimits:
        cpu: "4"
        memory: 4Gi
      postgresResourceLimits:
        cpu: "2"
        memory: 4Gi
        storage: 10Gi
      ipfs:
        rust:
          env:
            RUST_LOG: info,recon=trace
            CERAMIC_ONE_LOG_FORMAT: "json"
            DATABASE_URL: "postgres://ceramic:a414a8cf3615978ef0eb650350e00537a70e69ba@localhost:5432/ceramic"
          resourceLimits:
            cpu: "4"
            memory: 4Gi
            storage: 10Gi
          image: public.ecr.aws/r5b3e0r5/3box/ceramic-one:postgres
          storageClass: keramik-ssd
  # Use Kubo with CAS because it still needs pubsub
  cas:
    ipfs:
      go: {}
  monitoring:
    namespaced: true